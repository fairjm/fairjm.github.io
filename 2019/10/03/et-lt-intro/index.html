<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ç†ä¸€ç†Edge-triggeredå’ŒLevel-triggered | å°éº¦çš„æ‚è´§é“º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="æœ€è¿‘ç¾¤é‡Œåˆåœ¨è®¨è®ºjavaçš„NIO,æåˆ°äº†NIOä½¿ç”¨çš„ltè€Œnettyä½¿ç”¨JNIåœ¨linuxå’ŒMacOS&#x2F;BSDä¸­å°è£…äº†et.ä¹‹å‰å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µç¬¼ç»Ÿäº†è§£äº†ä¸‹,å¹¶æ²¡æœ‰å»æŸ¥é˜…é¢å¤–èµ„æ–™,ä»…é™çŸ¥é“ltåœ¨ç¼“å†²åŒºè¿˜æœ‰æ•°æ®çš„æƒ…å†µä¸‹å°±ä¼šè¢«pollå‡ºæ¥,è€Œetåˆ™éœ€è¦æœ‰æ–°çš„è¯·æ±‚&#x2F;äº‹ä»¶å‘ç”Ÿ.è¿™æ¬¡æŸ¥é˜…äº†ç‚¹èµ„æ–™,æ±‡æ€»ä¸€äº›æ•°æ®æ¥ç®€å•(æ¯•ç«Ÿä¹Ÿæ²¡æœ‰é‚£ä¹ˆæ·±å…¥..)è°ˆè°ˆè¿™ä¸¤ä¸ªæ¦‚å¿µ.">
<meta property="og:type" content="article">
<meta property="og:title" content="ç†ä¸€ç†Edge-triggeredå’ŒLevel-triggered">
<meta property="og:url" content="https://bingowith.me/2019/10/03/et-lt-intro/index.html">
<meta property="og:site_name" content="å°éº¦çš„æ‚è´§é“º">
<meta property="og:description" content="æœ€è¿‘ç¾¤é‡Œåˆåœ¨è®¨è®ºjavaçš„NIO,æåˆ°äº†NIOä½¿ç”¨çš„ltè€Œnettyä½¿ç”¨JNIåœ¨linuxå’ŒMacOS&#x2F;BSDä¸­å°è£…äº†et.ä¹‹å‰å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µç¬¼ç»Ÿäº†è§£äº†ä¸‹,å¹¶æ²¡æœ‰å»æŸ¥é˜…é¢å¤–èµ„æ–™,ä»…é™çŸ¥é“ltåœ¨ç¼“å†²åŒºè¿˜æœ‰æ•°æ®çš„æƒ…å†µä¸‹å°±ä¼šè¢«pollå‡ºæ¥,è€Œetåˆ™éœ€è¦æœ‰æ–°çš„è¯·æ±‚&#x2F;äº‹ä»¶å‘ç”Ÿ.è¿™æ¬¡æŸ¥é˜…äº†ç‚¹èµ„æ–™,æ±‡æ€»ä¸€äº›æ•°æ®æ¥ç®€å•(æ¯•ç«Ÿä¹Ÿæ²¡æœ‰é‚£ä¹ˆæ·±å…¥..)è°ˆè°ˆè¿™ä¸¤ä¸ªæ¦‚å¿µ.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-10-03T14:46:52.000Z">
<meta property="article:modified_time" content="2019-10-03T14:46:52.000Z">
<meta property="article:author" content="abaabaqua">
<meta property="article:tag" content="OS">
<meta property="article:tag" content="rust">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="å°éº¦çš„æ‚è´§é“º" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.1.7/css/fork-awesome.min.css">

  
<!-- hexo injector head_end start -->
    <link rel="stylesheet" href="/css/cc_custom.css">
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">å°éº¦çš„æ‚è´§é“º</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">æ—¥å¸¸éšç¬”~</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          
            <a class="nav-icon" target="_blank" rel="noopener" href="https://github.com/fairjm"><span class="fa fa-github"></span></a>
          
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS è®¢é˜…"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="æœç´¢"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://bingowith.me"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-et-lt-intro" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/10/03/et-lt-intro/" class="article-date">
  <time class="dt-published" datetime="2019-10-03T14:46:52.000Z" itemprop="datePublished">2019-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ç†ä¸€ç†Edge-triggeredå’ŒLevel-triggered
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘ç¾¤é‡Œåˆåœ¨è®¨è®ºjavaçš„NIO,æåˆ°äº†NIOä½¿ç”¨çš„ltè€Œnettyä½¿ç”¨JNIåœ¨linuxå’ŒMacOS&#x2F;BSDä¸­å°è£…äº†et.<br>ä¹‹å‰å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µç¬¼ç»Ÿäº†è§£äº†ä¸‹,å¹¶æ²¡æœ‰å»æŸ¥é˜…é¢å¤–èµ„æ–™,ä»…é™çŸ¥é“ltåœ¨ç¼“å†²åŒºè¿˜æœ‰æ•°æ®çš„æƒ…å†µä¸‹å°±ä¼šè¢«pollå‡ºæ¥,è€Œetåˆ™éœ€è¦æœ‰æ–°çš„è¯·æ±‚&#x2F;äº‹ä»¶å‘ç”Ÿ.<br>è¿™æ¬¡æŸ¥é˜…äº†ç‚¹èµ„æ–™,æ±‡æ€»ä¸€äº›æ•°æ®æ¥ç®€å•(æ¯•ç«Ÿä¹Ÿæ²¡æœ‰é‚£ä¹ˆæ·±å…¥..)è°ˆè°ˆè¿™ä¸¤ä¸ªæ¦‚å¿µ.  </p>
<span id="more"></span>
<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>è¿™ä¸¤ä¸ªåè¯åº”è¯¥æ¥æºäºç”µæ°”,ç”¨äºæ¿€æ´»ç”µè·¯.æ‘˜å–ä¸€æ®µçˆ†æ ˆç½‘çš„å›ç­”:</p>
<blockquote>
<p>Level Triggering: In level triggering the circuit will become active when the gating or clock pulse is on a particular level. This level is decided by the designer. We can have a negative level triggering in which the circuit is active when the clock signal is low or a positive level triggering in which the circuit is active when the clock signal is high.<br>Edge Triggering: In edge triggering the circuit becomes active at negative or positive edge of the clock signal. For example if the circuit is positive edge triggered, it will take input at exactly the time in which the clock signal goes from low to high. Similarly input is taken at exactly the time in which the clock signal goes from high to low in negative edge triggering. But keep in mind after the the input, it can be processed in all the time till the next input is taken.  </p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://electronics.stackexchange.com/questions/21886/what-does-edge-triggered-and-level-triggered-mean#21891">æ¥æº.</a><br>ç¿»è¯‘å°±æ˜¯LTæ˜¯æ ¹æ®è®¾å®šçš„é˜ˆå€¼æ¥æ§åˆ¶æ˜¯å¦æ¿€å‘è€ŒETæ˜¯æ ¹æ®ä¿¡å·çš„é«˜åˆ°ä½æˆ–ä½åˆ°é«˜è¿™ä¸ªå˜åŒ–æ¥æ§åˆ¶.  </p>
<p>å­—é¢æ„æ€ä¸Šlevelå°±æ˜¯æ°´å¹³æŒ‡çš„æ˜¯æŸå€¼,è€Œedgeæ˜¯è¾¹,æ˜¯å€¼å’Œå€¼ä¹‹é—´çš„å˜è¿.<br>ç”¨æ¥æ§åˆ¶æ“ä½œæ˜¯å¦è¿›è¡Œçš„ä¸€ç§æœºåˆ¶.</p>
<p>å¯¹åº”äºepollä¸­çš„æ¦‚å¿µä¹Ÿç±»ä¼¼.<br>æ‹¿æ–‡æ¡£ä¸­çš„ä¾‹å­:</p>
<blockquote>
<ol>
<li>The file descriptor that represents the read side of a pipe (rfd) is registered on the epoll instance.</li>
<li>A pipe writer writes 2 kB of data on the write side of the pipe.</li>
<li>A call to epoll_wait(2) is done that will return rfd as a ready file descriptor.</li>
<li>The pipe reader reads 1 kB of data from rfd.</li>
<li>A call to epoll_wait(2) is done.</li>
</ol>
</blockquote>
<p>ä½¿ç”¨LTçš„è¯,å› ä¸ºä¾æ—§æœ‰1KBæ®‹ç•™æ‰€ä»¥waitä¼šç«‹å³è¿”å›å¼€å§‹ä¸‹ä¸€æ¬¡æ“ä½œ,è€ŒETè¿™æ¬¡å˜è¿å·²ç»ç»“æŸäº†,ä½†å› ä¸ºæ²¡æœ‰å¤„ç†å®Œæ‰€ä»¥åç»­å˜åŒ–ä¹Ÿä¸ä¼šå†è¿”å›äº†.(Since the read operation done in 4 does not consume the whole buffer data, the call to epoll_wait(2) done in step 5 might block indefinitely.)  </p>
<p>ETåœ¨ä½¿ç”¨ä¸Šå»ºè®®éµå¾ªä»¥ä¸‹çš„è§„åˆ™:  </p>
<blockquote>
<p>i   with nonblocking file descriptors; and<br>ii  by waiting for an event only after read(2) or write(2)<br>                  return EAGAIN.  </p>
</blockquote>
<p>éé˜»å¡çš„æ–‡ä»¶æè¿°ç¬¦(FDæˆ–SD)ä»¥åŠè¦readæˆ–writeåœ¨è¿”å›EAGAINçš„æƒ…å†µä¸‹æ‰å¼€å§‹è¿™ä¸ªæè¿°ç¬¦çš„ä¸‹ä¸€æ¬¡äº‹ä»¶ç›‘å¬.(å¯¹äºç½‘ç»œIOæ¥è¯´ä¹Ÿå¯èƒ½æ˜¯EWOULDBLOCK, è¡¨ç¤ºè¢«æ ‡è®°ä¸ºéé˜»å¡çš„æ“ä½œä¼šå‘ç”Ÿé˜»å¡çš„å¼‚å¸¸)  </p>
<p>ç›¸å¯¹æ¥è¯´ä½¿ç”¨ETçš„è¦æ±‚å’Œæ“ä½œä¼šéœ€è¦æ›´ä¸¥è°¨ä¸€äº›,å½“ç„¶LTå†™å¾—æœ‰é—®é¢˜,æ¯”å¦‚æ¼äº†ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†,å¯èƒ½ä¼šå¯¼è‡´å‡ºç°è·‘æ»¡CPUçš„æ­»å¾ªç¯.</p>
<h1 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h1><p>è¿™é‡Œä½¿ç”¨mioæ¥æ¼”ç¤ºè¿™ä¸¤ç§çš„ä½¿ç”¨æ–¹å¼.ä»£ç ç›´æ¥æ”¹çš„å®˜ç½‘TcpServerçš„ç¤ºä¾‹.<br>å®Œæ•´ä»£ç è§:<a target="_blank" rel="noopener" href="https://github.com/fairjm/feel_boring/blob/master/edge_level_test/src/main.rs">main.rs</a>.  </p>
<p>é¦–å…ˆæœ€å¤–å±‚æ˜¯ä¸€æ ·çš„,é€‰æ‹©æ„Ÿå…´è¶£çš„äº‹ä»¶æ³¨å†Œåˆ°pollä¸­,pollè¿›è¡Œwaitç­‰å¾…å¯ç”¨äº‹ä»¶.äº‹ä»¶çš„å¤„ç†ä¸Šå°±æœ‰äº›è®¸å·®å¼‚.  </p>
<p>é¦–å…ˆæ˜¯LT:  </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_level</span>(stream: &amp;<span class="keyword">mut</span> TcpStream, poll: &amp;Poll) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">connection_closed</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">buf</span> = <span class="built_in">vec!</span>[<span class="number">0u8</span>; <span class="number">8</span>];</span><br><span class="line">        <span class="keyword">match</span> stream.<span class="title function_ invoke__">read</span>(&amp;<span class="keyword">mut</span> buf) &#123;</span><br><span class="line">            <span class="title function_ invoke__">Ok</span>(<span class="number">0</span>) =&gt; &#123;</span><br><span class="line">                connection_closed = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Ok</span>(_n) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;======come new read======&quot;</span>);</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;read:&#123;:?&#125;&quot;</span>, <span class="type">String</span>::<span class="title function_ invoke__">from_utf8</span>(buf));</span><br><span class="line">                <span class="comment">// just return is ok for level</span></span><br><span class="line">                <span class="keyword">return</span> <span class="title function_ invoke__">Ok</span>(());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(<span class="keyword">ref</span> err) <span class="keyword">if</span> <span class="title function_ invoke__">would_block</span>(err) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;would_block happened&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(<span class="keyword">ref</span> err) <span class="keyword">if</span> <span class="title function_ invoke__">interrupted</span>(err) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;interrupted happened&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(err) =&gt; <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(err),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> connection_closed &#123;</span><br><span class="line">        <span class="comment">// must have this one</span></span><br><span class="line">        poll.<span class="title function_ invoke__">deregister</span>(stream)?;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125; Connection closed&quot;</span>, stream.<span class="title function_ invoke__">peer_addr</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>OK(_n)</code>ä¸­,å½“å‰åªè¯»å–éƒ¨åˆ†byteå¹¶è¿”å›æ˜¯å¯ä»¥çš„,å¹¶ä¸”å¦‚æœæœªè¯»å®Œä¼šç«‹å³å‘èµ·ä¸‹ä¸€ä¸ªäº‹ä»¶.ä½†è¦æ³¨æ„å¦‚æœè¿æ¥å…³é—­éœ€è¦ç§»é™¤,ä¸ç„¶å¯èƒ½ä¼šæœ‰å¥‡æ€ªçš„é—®é¢˜.(åœ¨æœ¬æœºä¸Šå¦‚æœä¸ç§»é™¤å¯èƒ½ä¼šå¯¼è‡´æ— é™çš„readäº‹ä»¶)  </p>
<p>è€ŒETçš„è¯å°±éœ€è¦è¯»åˆ°å‡ºç°WouldBlock</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_edge</span>(stream: &amp;<span class="keyword">mut</span> TcpStream) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">connection_closed</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">buf</span> = <span class="built_in">vec!</span>[<span class="number">0u8</span>; <span class="number">8</span>];</span><br><span class="line">        <span class="keyword">match</span> stream.<span class="title function_ invoke__">read</span>(&amp;<span class="keyword">mut</span> buf) &#123;</span><br><span class="line">            <span class="title function_ invoke__">Ok</span>(<span class="number">0</span>) =&gt; &#123;</span><br><span class="line">                connection_closed = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Ok</span>(_n) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;======come new read======&quot;</span>);</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;read:&#123;:?&#125;&quot;</span>, <span class="type">String</span>::<span class="title function_ invoke__">from_utf8</span>(buf));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(<span class="keyword">ref</span> err) <span class="keyword">if</span> <span class="title function_ invoke__">would_block</span>(err) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;would_block happened&quot;</span>);</span><br><span class="line">                <span class="comment">// edge rely this to return, without this or just return after read(like level)</span></span><br><span class="line">                <span class="comment">// the connection will not be read anymore</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_ invoke__">Err</span>(<span class="keyword">ref</span> err) <span class="keyword">if</span> <span class="title function_ invoke__">interrupted</span>(err) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;interrupted happened&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// Other errors we&#x27;ll consider fatal.</span></span><br><span class="line">            <span class="title function_ invoke__">Err</span>(err) =&gt; <span class="keyword">return</span> <span class="title function_ invoke__">Err</span>(err),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> connection_closed &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125; Connection closed&quot;</span>, stream.<span class="title function_ invoke__">peer_addr</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ— æ³•åƒLTä¸€æ ·ç›´æ¥è¯»å®Œéƒ¨åˆ†è¿”å›,éœ€è¦åœ¨å‡ºç°é˜»å¡çš„æƒ…å†µä¸‹æ‰èƒ½ç»§ç»­æ“ä½œ.<br>å› ä¸ºmioç›¸å¯¹åº•å±‚,æ‰€ä»¥æè¿°èµ·æ¥å’Œepollæ–‡æ¡£ä¹Ÿç±»ä¼¼,javaçš„NIOä¹Ÿç±»ä¼¼,ä½†å› ä¸ºåªæä¾›äº†LTæ‰€ä»¥å°±æ²¡æœ‰ETä»€ä¹ˆäº‹äº†.  </p>
<h1 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="headerlink" title="é€‰æ‹©"></a>é€‰æ‹©</h1><p>ETçš„é—®é¢˜ä¸»è¦æ˜¯éœ€è¦æ›´ä¸¥è°¨çš„æ“ä½œ,è€ŒLTæ˜¯æ›´é¢‘ç¹çš„waitå”¤é†’.<br>åœ¨æŸç§ç¨‹åº¦ä¸Š,ETæ›´åŠ â€™æƒ°æ€§â€™è€ŒLTæ›´åŠ ç§¯æ,ä½ å¦‚æœä¸å¤„ç†æˆ–è€…è¿˜ä¸æƒ³å¤„ç†å°±ä¼šåå¤æ”¶åˆ°äº‹ä»¶,é™¤éä½ å–æ¶ˆæ³¨å†Œä»–.<br>æ‰€ä»¥åœ¨ä¸å°‘javaçš„NIOä»£ç ä¸­,å¸¸å¸¸ä¼šæœ‰channelåœ¨è¯»åå–æ¶ˆè¯»æ³¨å†Œå†™,åœ¨å†™åå–æ¶ˆå†™æ³¨å†Œè¯»çš„ä»£ç ,å½“å¯ä»¥å†™,ä½†æ˜¯å†™çš„å†…å®¹è¿˜æ²¡å‡†å¤‡å¥½æ—¶,ä½¿ç”¨LTä¼šé‡åˆ°ä¸å°‘é—®é¢˜(æ‰€ä»¥ä¸€èˆ¬æ˜¯å‡†å¤‡å†™çš„å†…å®¹å·²ç»å¥½äº†,å†ç»™channelæ³¨å†Œä¸Šå†™çš„å…´è¶£).<br>ETåœ¨è¯»ä¸Šä¼šæ›´åŠ éº»çƒ¦,ä¸è¯»å®Œç­‰åˆ°è¿”å›EAGAIN,è¯¥æè¿°ç¬¦å¯èƒ½ä¹‹åçš„äº‹ä»¶è§¦å‘å°±ä¼šæœ‰é—®é¢˜.<br>å…·ä½“è¿˜éœ€è¦çœ‹è‡ªå·±çš„éœ€æ±‚å’Œåœºæ™¯.<br>æ­¤å¤–å¤šçº¿ç¨‹åœºæ™¯ä¸‹,åœ¨åŒä¸€ä¸ªæè¿°ç¬¦ä¸Šç­‰å¾…ETæ˜¯ä¿è¯åªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹,ä½†è¦æ³¨æ„å¤šä¸ªä¸åŒçš„æ•°æ®å—è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´åœ¨ä¸€ä¸ªFD&#x2F;SDä¸Šè¿”å›å¤šä¸ªäº‹ä»¶,éœ€è¦ä½¿ç”¨<code>EPOLLONESHOT</code>æ¥ç¡®ä¿åªè¿”å›ä¸€ä¸ª(è¿™ä¸ªflagæ˜¯æ¥å—åˆ°ä¸€ä¸ªäº‹ä»¶åå°±è§£ç»‘å’ŒFD&#x2F;SDå…³ç³»çš„).  </p>
<p>javaä¸­åªæ”¯æŒLT,nettyé€šè¿‡JNIå®ç°äº†ET,é€‰æ‹©çš„åŸå› åœ¨ä¸€ä¸ªé‚®ä»¶é‡Œæåˆ°äº†ä¸€äº›<a target="_blank" rel="noopener" href="http://mail.openjdk.java.net/pipermail/nio-dev/2008-December/000329.html">Any reason why select() uses only level-triggered notification mode?</a>.<br>å¤§è‡´çš„æ„æ€æ˜¯ETå’ŒI&#x2F;Oæä¾›çš„æ–¹æ³•æ›´åŠ è€¦åˆ,å¯èƒ½æ˜¯ä¸ºäº†æ›´é«˜çš„å…¼å®¹æ€§æ”¾å¼ƒäº†è¿™ä¸ªæœºåˆ¶çš„æä¾›å§.  </p>
<p>è¿™è¾¹å°±è¿›è¡Œäº†ç®€å•çš„ä¸€äº›èµ„æ–™æ•´åˆ,æ²¡æœ‰æ¶‰åŠåˆ°æ›´æ·±çš„å†…å®¹,å¦‚æœæ–‡ä¸­æœ‰ä»€ä¹ˆé”™è¯¯æ¬¢è¿è¯„è®º.</p>
<p>å‚è€ƒèµ„æ–™:<br><a target="_blank" rel="noopener" href="https://netty.io/wiki/native-transports.html">https://netty.io/wiki/native-transports.html</a>  </p>
<p><a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man7/epoll.7.html">http://man7.org/linux/man-pages/man7/epoll.7.html</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/tokio-rs/mio">https://github.com/tokio-rs/mio</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://bingowith.me/2019/10/03/et-lt-intro/" data-id="cmj09y6su00106gvah5wa7hia" data-title="ç†ä¸€ç†Edge-triggeredå’ŒLevel-triggered" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OS/" rel="tag">OS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rust/" rel="tag">rust</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/05/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">å‰ä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/2019/08/16/learning-rust/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">åä¸€ç¯‡</strong>
      <div class="article-nav-title">rustå­¦ä¹ æ„Ÿæƒ³</div>
    </a>
  
</nav>

  
</article>


</section>
        
      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">æ¶æ„è®¾è®¡</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">è®¡ç®—æœºåŸºç¡€</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASP-NET/" rel="tag">ASP.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDN/" rel="tag">CDN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSR/" rel="tag">CSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache-Components/" rel="tag">Cache Components</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ComfyUI/" rel="tag">ComfyUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GBK/" rel="tag">GBK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPT/" rel="tag">GPT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H2/" rel="tag">H2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JOOQ/" rel="tag">JOOQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MPA/" rel="tag">MPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Next-js/" rel="tag">Next.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Next-js-16/" rel="tag">Next.js 16</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/" rel="tag">OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RSC/" rel="tag">RSC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPA/" rel="tag">SPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSE/" rel="tag">SSE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSR/" rel="tag">SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UTF-8/" rel="tag">UTF-8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unicode/" rel="tag">Unicode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-Development/" rel="tag">Web Development</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Z-Image/" rel="tag">Z-Image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/auth-js/" rel="tag">auth.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/" rel="tag">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/" rel="tag">azure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blazor/" rel="tag">blazor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/claude/" rel="tag">claude</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloudflare/" rel="tag">cloudflare</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-compose/" rel="tag">docker compose</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dotnet/" rel="tag">dotnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/drizzle/" rel="tag">drizzle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/expo-router/" rel="tag">expo router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filerobot-image-editor/" rel="tag">filerobot-image-editor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/" rel="tag">life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/llm/" rel="tag">llm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maui/" rel="tag">maui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/" rel="tag">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysqldump/" rel="tag">mysqldump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextjs/" rel="tag">nextjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openai/" rel="tag">openai</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/playwright/" rel="tag">playwright</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/" rel="tag">react native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/remix/" rel="tag">remix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/route53/" rel="tag">route53</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rust/" rel="tag">rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shopify/" rel="tag">shopify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shopify-CLI/" rel="tag">shopify CLI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-boot/" rel="tag">spring boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timestamp/" rel="tag">timestamp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timezone/" rel="tag">timezone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/troubleshooting/" rel="tag">troubleshooting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%8E%E6%98%BE%E5%AD%98/" rel="tag">ä½æ˜¾å­˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/" rel="tag">å‰ç«¯æ¶æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E9%9B%86/" rel="tag">å­—ç¬¦é›†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">ç¼–ç </a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BF%BB%E8%AF%91/" rel="tag">ç¿»è¯‘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8F%E5%8C%96/" rel="tag">é‡åŒ–</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/ASP-NET/" style="font-size: 10px;">ASP.NET</a> <a href="/tags/C/" style="font-size: 10px;">C#</a> <a href="/tags/CDN/" style="font-size: 10px;">CDN</a> <a href="/tags/CSR/" style="font-size: 12px;">CSR</a> <a href="/tags/Cache-Components/" style="font-size: 10px;">Cache Components</a> <a href="/tags/ComfyUI/" style="font-size: 10px;">ComfyUI</a> <a href="/tags/GBK/" style="font-size: 10px;">GBK</a> <a href="/tags/GPT/" style="font-size: 10px;">GPT</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/H2/" style="font-size: 10px;">H2</a> <a href="/tags/JOOQ/" style="font-size: 10px;">JOOQ</a> <a href="/tags/MPA/" style="font-size: 10px;">MPA</a> <a href="/tags/MySQL/" style="font-size: 14px;">MySQL</a> <a href="/tags/Next-js/" style="font-size: 14px;">Next.js</a> <a href="/tags/Next-js-16/" style="font-size: 10px;">Next.js 16</a> <a href="/tags/OS/" style="font-size: 10px;">OS</a> <a href="/tags/RSC/" style="font-size: 10px;">RSC</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/SPA/" style="font-size: 12px;">SPA</a> <a href="/tags/SSE/" style="font-size: 10px;">SSE</a> <a href="/tags/SSR/" style="font-size: 10px;">SSR</a> <a href="/tags/UTF-8/" style="font-size: 10px;">UTF-8</a> <a href="/tags/Unicode/" style="font-size: 10px;">Unicode</a> <a href="/tags/Web-Development/" style="font-size: 10px;">Web Development</a> <a href="/tags/Z-Image/" style="font-size: 10px;">Z-Image</a> <a href="/tags/auth-js/" style="font-size: 10px;">auth.js</a> <a href="/tags/aws/" style="font-size: 12px;">aws</a> <a href="/tags/azure/" style="font-size: 12px;">azure</a> <a href="/tags/blazor/" style="font-size: 10px;">blazor</a> <a href="/tags/claude/" style="font-size: 10px;">claude</a> <a href="/tags/cloudflare/" style="font-size: 10px;">cloudflare</a> <a href="/tags/docker/" style="font-size: 14px;">docker</a> <a href="/tags/docker-compose/" style="font-size: 10px;">docker compose</a> <a href="/tags/dotnet/" style="font-size: 10px;">dotnet</a> <a href="/tags/drizzle/" style="font-size: 12px;">drizzle</a> <a href="/tags/expo-router/" style="font-size: 10px;">expo router</a> <a href="/tags/filerobot-image-editor/" style="font-size: 10px;">filerobot-image-editor</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/javascript/" style="font-size: 12px;">javascript</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/life/" style="font-size: 12px;">life</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/llm/" style="font-size: 10px;">llm</a> <a href="/tags/maui/" style="font-size: 10px;">maui</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 14px;">mysql</a> <a href="/tags/mysqldump/" style="font-size: 10px;">mysqldump</a> <a href="/tags/nextjs/" style="font-size: 16px;">nextjs</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 12px;">nodejs</a> <a href="/tags/openai/" style="font-size: 12px;">openai</a> <a href="/tags/playwright/" style="font-size: 10px;">playwright</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/remix/" style="font-size: 10px;">remix</a> <a href="/tags/route53/" style="font-size: 10px;">route53</a> <a href="/tags/rust/" style="font-size: 18px;">rust</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/shopify/" style="font-size: 14px;">shopify</a> <a href="/tags/shopify-CLI/" style="font-size: 10px;">shopify CLI</a> <a href="/tags/spring-boot/" style="font-size: 12px;">spring boot</a> <a href="/tags/timestamp/" style="font-size: 10px;">timestamp</a> <a href="/tags/timezone/" style="font-size: 10px;">timezone</a> <a href="/tags/troubleshooting/" style="font-size: 10px;">troubleshooting</a> <a href="/tags/%E4%BD%8E%E6%98%BE%E5%AD%98/" style="font-size: 10px;">ä½æ˜¾å­˜</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/" style="font-size: 10px;">å‰ç«¯æ¶æ„</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E9%9B%86/" style="font-size: 10px;">å­—ç¬¦é›†</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 10px;">ç¼–ç </a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 16px;">ç¿»è¯‘</a> <a href="/tags/%E9%87%8F%E5%8C%96/" style="font-size: 10px;">é‡åŒ–</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/12/">åäºŒæœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/11/">åä¸€æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">ä¹æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">å…«æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">ä¸ƒæœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">å…­æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">äº”æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">ä¸‰æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">ä¸€æœˆ 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">åäºŒæœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">ä¹æœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">å…­æœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">ä¸‰æœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">äºŒæœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">ä¸€æœˆ 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">åäºŒæœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">åä¸€æœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">å…«æœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">äº”æœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">å››æœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">äºŒæœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">åä¸€æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">åæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">äº”æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">å››æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">ä¸‰æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">äºŒæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">ä¸€æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">äº”æœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">åæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">å…«æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">å…­æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">äºŒæœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">ä¸€æœˆ 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">åäºŒæœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">åä¸€æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">åæœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">ä¹æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">å››æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">äºŒæœˆ 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">åä¸€æœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">åæœˆ 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">ä¹æœˆ 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/12/10/character-encoding-explained/">å­—ç¬¦ç¼–ç è¯¦è§£ï¼šUTF-8ã€Unicodeã€GBK ç­‰</a>
          </li>
        
          <li>
            <a href="/2025/12/09/understanding-ssr-csr-spa-mpa/">æ·±å…¥ç†è§£ SSR/CSR ä¸ SPA/MPAï¼šç°ä»£å‰ç«¯æ¸²æŸ“æ¨¡å¼è¯¦è§£</a>
          </li>
        
          <li>
            <a href="/2025/11/28/z-image-turbo-low-vram-setup/">6GBæ˜¾å­˜è·‘Z-Image-Turboå®Œå…¨æŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2025/11/16/nextjs-docker-deploy-pitfalls/">è‡ªè¡Œéƒ¨ç½² Next.js Docker çš„æŒ‘æˆ˜ï¼šè‡ƒè‚¿ã€å¹³å°ç»‘å®šä¸éšè—çš„â€œå‘â€</a>
          </li>
        
          <li>
            <a href="/2025/11/01/nextjs-16-cache-components-complete-guide/">Next.js 16 Cache Components å®Œå…¨æŒ‡å—</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 abaabaqua<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>





<script src="/js/script.js"></script>





  </div>
<!-- hexo injector body_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.30.0/tocbot.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.30.0/tocbot.min.js"></script>
  
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (window.location.pathname === '/') {
        return;
      }
      // æ£€æŸ¥æ˜¯å¦å­˜åœ¨ .article-entry å…ƒç´ 
      const articleEntry = document.querySelector('.article-entry');
      if (!articleEntry) return; // å¦‚æœä¸å­˜åœ¨ï¼Œç›´æ¥é€€å‡º

      // æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ç« é¡µé¢
      const articleTitle = document.querySelector('header.article-header');
      if (!articleTitle) {
        return;
      }

      // åˆ›å»ºä¾§è¾¹æ å®¹å™¨
      const tocSidebar = document.createElement('div');
      tocSidebar.className = 'toc-sidebar';

      // åˆ›å»ºåˆ‡æ¢æŒ‰é’®
      const toggleBtn = document.createElement('button');
      toggleBtn.className = 'toc-toggle';
      toggleBtn.innerHTML = 'ğŸ“‘';
      toggleBtn.title = 'ç›®å½•';

      // åˆ›å»º TOC å†…å®¹å®¹å™¨
      const tocDiv = document.createElement('div');
      tocDiv.className = 'toc';

      tocSidebar.appendChild(toggleBtn);
      tocSidebar.appendChild(tocDiv);
      document.body.appendChild(tocSidebar);

      // åˆå§‹åŒ– tocbot
      tocbot.init({
        tocSelector: '.toc',
        contentSelector: '.article-entry',
        headingSelector: 'h2, h3, h4',
        collapseDepth: 3,
        scrollSmooth: true,
        scrollSmoothDuration: 420,
      });

      // ä» localStorage è¯»å–æ”¶ç¼©çŠ¶æ€
      const isCollapsed = localStorage.getItem('tocCollapsed') === 'true';
      if (isCollapsed) {
        tocSidebar.classList.add('collapsed');
      }

      // åˆ‡æ¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      toggleBtn.addEventListener('click', function () {
        tocSidebar.classList.toggle('collapsed');
        const collapsed = tocSidebar.classList.contains('collapsed');
        localStorage.setItem('tocCollapsed', collapsed);
      });
    });
    </script>
  
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      // åˆ›å»ºå›åˆ°é¡¶éƒ¨æŒ‰é’®
      const backToTopButton = document.createElement('div');
      backToTopButton.id = 'back-to-top';
      backToTopButton.innerHTML = 'â†‘ TOP';
      document.body.appendChild(backToTopButton);

      // ç›‘å¬æ»šåŠ¨äº‹ä»¶
      window.addEventListener('scroll', function () {
        if (window.scrollY > 300) { // å½“æ»šåŠ¨è¶…è¿‡300pxæ—¶æ˜¾ç¤ºæŒ‰é’®
          backToTopButton.classList.add('show');
        } else {
          backToTopButton.classList.remove('show');
        }
      });

      // ç‚¹å‡»æŒ‰é’®å›åˆ°é¡¶éƒ¨
      backToTopButton.addEventListener('click', function () {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    });
    </script>
  <!-- hexo injector body_end end --></body>
</html>